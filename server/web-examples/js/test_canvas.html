<html>
  <head>
    <style type="text/css">
	@font-face {
	    font-family: 'Guido2';
	    src: url('guido2-webfont.eot');
	    src: url('guido2-webfont.eot?#iefix') format('embedded-opentype'),
	         url('guido2-webfont.woff') format('woff'),
	         url('guido2-webfont.ttf') format('truetype'),
	    font-weight: normal;
	    font-style: normal;

	}
    </style>
    <script type="text/javascript" src="jquery-1.10.2.min.js"></script>
    <script type="text/javascript" src="jsDSLdevice.js"></script>
    <script>
      function processGMN() {
        $.post("http://guidoservice.grame.fr/",  "data="+encodeURIComponent($("#gmnSandbox").val()), function(data) {
          var xhr = new XMLHttpRequest();
          xhr.open('GET',"http://guidoservice.grame.fr/"+data.ID+"/?format=dsl", true);
          xhr.responseType = 'arraybuffer';
          xhr.onload = function(e) {
            console.log(this.status);
            if (this.status == 201) {
              success = true;
              parseGuidoDSL(this.response, 0);
              $("#warning").text("");
            }
          }
          xhr.send();
        }).fail(function() {
          $("#warning").text("The GMN code above contains a syntax error.");
        });
        $("#warning").text("Processing . . .");
      }
      $(function () {
        $('body').append("<div id='loadfont' style='font-family: Guido2;'>.</div>");
        $('#loadfont').remove();
        $("#gmnSandbox").on('keyup', processGMN);
        processGMN();
      });
    </script>
    <style type="text/css">
      div.column {
        display: block;
        width: 50%;
      }
      #gmnSandbox {
        width: 95%;
      }
      #guidoResult {
        /*border: 0px;*/
      }
    </style>
  </head>
  <body>
    <div class="column" style="float:left">
      <p>Type your GMN code here:</p>
      <textarea id="gmnSandbox" rows="40">
[a b c d]
      </textarea>
    </div>
    <div id="canvasContainer" class="column" style="float:right">
      <canvas>
      </canvas>
    </div>
    <div style="clear:both"></div>
    <div id="warning"></div>
  </body>
</html>