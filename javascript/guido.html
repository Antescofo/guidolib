<html>
<body>
<script src="libGUIDOEngine.js" type="text/javascript"></script>
<script src="guidoEmscriptenBridge.js" type="text/javascript"></script>
<script type="text/javascript">


out = GuidoInitWithIndependentSVG()

function doit( gmn ) {
	p=GuidoOpenParser();
	//console.log ("parser is " + p );
	ar = GuidoString2AR (p, gmn);
	GuidoCloseParser(p);
	//console.log ("ar is " + ar);
	gr = GuidoARretGR (ar, 0);
	//console.log ("gr is " + gr);
	svg_n=GuidoSVGExportWithFontSpec_retCString(gr, 1);
	svg = Pointer_stringify(svg_n);
	guido_svg = document.getElementById('guido_svg');
	guido_svg.innerHTML = svg;
	GuidoReleaseCString(svg_n);

	guidoCountVoices = document.getElementById('guidoCountVoices');
	guidoCountVoices.innerHTML = "Number of voices: "+GuidoCountVoices(ar);

	guidoGetPageCount = document.getElementById('guidoGetPageCount');
	guidoGetPageCount.innerHTML = "Number of pages: "+GuidoGetPageCount(gr);

	guidoGetSystemCount = document.getElementById('guidoGetSystemCount');
	guidoGetSystemCount.innerHTML = "Number of systems on page 1: "+GuidoGetSystemCount(gr, 1);
	
	guidoDuration_retDate = document.getElementById('guidoDuration_retDate');
	date = GuidoDuration_retDate(gr);
	guidoDuration_retDate.innerHTML = "Duration: "+GuidoGetDateNum(date)+"/"+GuidoGetDateDenom(date);
	GuidoFreeDate(date);

	guidoFindEventPage_p = document.getElementById('guidoFindEventPage_p');
	date = GuidoMakeDate(1,4);
	page = GuidoFindEventPage_p(gr, date);
	guidoFindEventPage_p.innerHTML = "Page at event 1/4: "+page;
	GuidoFreeDate(date);

	guidoFindPageAt_p = document.getElementById('guidoFindPageAt_p');
	date = GuidoMakeDate(1,4);
	page = GuidoFindPageAt_p(gr, date);
	guidoFindPageAt_p.innerHTML = "Page at 1/4: "+page;
	GuidoFreeDate(date);

	guidoGetPageDate_retDate = document.getElementById('guidoGetPageDate_retDate');
	date = GuidoGetPageDate_retDate(gr, 1);
	guidoGetPageDate_retDate.innerHTML = "Page date for page 1: "+GuidoGetDateNum(date)+"/"+GuidoGetDateDenom(date);
	GuidoFreeDate(date);
}

</script>

<div id="guidoCountVoices"></div>
<div id="guidoGetPageCount"></div>
<div id="guidoGetSystemCount"></div>
<div id="guidoDuration_retDate"></div>
<div id="guidoFindEventPage_p"></div>
<div id="guidoFindPageAt_p"></div>
<div id="guidoGetPageDate_retDate"></div>
<div id="guido_svg"></div>

<script type="text/javascript">
  doit("{ [f# g# a& b& f# g# a& b&] , [f g a b f g a b] } ");
</script>

</body>

</html>
